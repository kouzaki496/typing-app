# タイピングアプリ開発記録

## 実装済み機能

### 1. テーマ管理

- ダークモード/ライトモードの切り替え機能
- `next-themes`を使用したテーマ管理
- ハイドレーションエラーを解決するためのマウント状態管理

### 2. UI コンポーネント

- **Header**: アプリ名、サインイン/アウト、テーマ切り替えボタンを含むヘッダー
- **Modal**: ダイアログベースのモーダルウィンドウ
- **Button**: shadcn/ui のボタンコンポーネント
- **PlayScreen**: タイピングゲームのメイン画面
  - **TypingArea**: CodeMirror を使用したコーディングエリア
  - **ExampleDisplay**: 例文表示エリア

### 3. ルーティング

- `/`: ホームページ（モーダルで PlayScreen を表示）
- `/play`: 独立した PlayScreen ページ

### 4. スタイリング

- Tailwind CSS を使用したレスポンシブデザイン
- shadcn/ui コンポーネントの統合

## 次のステップ（ロードマップに基づく優先順位）

### 1. タイピングゲーム機能の実装

- [ ] 例文データの管理と表示
  - `src/app/data/examples.ts` の作成
  - 難易度・言語別のサンプルコード追加
- [ ] タイピング検証機能
  - 入力と例文の比較ロジック
  - 正確性（accuracy）の計算
- [ ] 時間計測と WPM 計算
  - タイマー機能の実装
  - Words Per Minute の計算ロジック
- [ ] 結果表示画面
  - 成績表示コンポーネントの作成
  - 「再挑戦」ボタンの実装

### 2. ゲーム体験の拡張

- [ ] 難易度選択機能
  - 難易度フィルター UI の作成
  - 難易度に応じた例文の提供
- [ ] 言語選択機能
  - 言語選択 UI の実装
  - 言語別のシンタックスハイライト
- [ ] キーボードショートカット
  - Escape キーでの中断
  - Ctrl+Enter での再挑戦

### 3. データ永続化（ローカルストレージ）

- [ ] スコア履歴の保存
  - LocalStorage を使用した履歴管理
  - 履歴表示コンポーネントの作成
- [ ] ユーザー設定の保存
  - テーマ設定の永続化
  - 言語・難易度の設定保存

### 4. 認証システム（Firebase）

- [ ] Firebase Authentication の設定
  - プロジェクト設定と SDK 導入
  - 認証プロバイダの設定
- [ ] サインイン/サインアップ機能
  - 認証フォームの作成
  - エラーハンドリング
- [ ] ユーザープロフィール管理
  - Firestore との連携
  - プロフィール編集機能

## 技術的な課題と解決策

### 1. ハイドレーションエラー

- **問題**: サーバーサイドレンダリングとクライアントサイドの不一致
- **解決策**: マウント状態を管理し、クライアントサイドでのみテーマプロバイダーをレンダリング

### 2. CodeMirror 統合

- **問題**: CodeMirror の依存関係の重複によるエラー
- **解決策**: 適切なインポートと拡張機能の設定

### 3. レスポンシブデザイン

- **問題**: 異なる画面サイズでの表示の最適化
- **解決策**: Tailwind CSS のユーティリティクラスを使用した柔軟なレイアウト

### 4. コンポーネント間のデータ共有

- **問題**: PlayScreen、TypingArea、ExampleDisplay 間でのデータ共有
- **解決策**: Props を通じたデータの受け渡しとコールバック関数の実装

## 命名規則と一貫性

- コンポーネント: PascalCase（例: `PlayScreen`）
- 変数: camelCase（例: `userInput`）
- 定数: UPPER_SNAKE_CASE（例: `MAX_ATTEMPTS`）
- 認証関連: `signIn`/`signOut`/`signUp` の統一（`login`/`logout` は使用しない）
- コレクション: 複数形（例: `examples`）、単一アイテム: 単数形（例: `example`）

## 今後の展望

- プログレッシブウェブアプリ（PWA）への対応
- 多言語対応
- コードスニペットの追加と拡張
- コミュニティ機能の実装（リーダーボード、チャレンジモードなど）
- AI を活用した個人化された学習体験
